<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Chatbot Interface{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="shortcut icon" href="/static/favicon.ico">
    {% block extra_css %}{% endblock %}
    {% if google_tag_manager_id %}
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','{{ google_tag_manager_id }}');</script>
    <!-- End Google Tag Manager -->
    {% endif %}
    <script src="https://unpkg.com/d3"></script>
    <script src="https://unpkg.com/force-graph"></script>
</head>
<body>
    {% if google_tag_manager_id %}
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ google_tag_manager_id }}"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    {% endif %}
    {% block toolbar %}{% endblock %}
    
    {% block content %}{% endblock %}
    
    {% block modals %}{% endblock %}
    
<footer id="powered-by-falkordb">
  Powered by <a href="https://falkordb.com" target="_blank" rel="noopener">
    <img src="{{ url_for('static', path='icons/logo.svg') }}" alt="FalkorDB Logo" style="height:1.5em;vertical-align:middle;" />
  </a>
</footer>
{% block scripts %}
    {# Set authentication state for JS #}
    <script>
      window.isAuthenticated = {{ 'true' if is_authenticated else 'false' }};
      {% if user_info %}
      window.currentUser = {
          name: "{{ user_info.name|e }}",
          email: "{{ user_info.email|e }}",
          picture: "{{ user_info.picture|e }}"
      };
      {% else %}
      window.currentUser = null;
      {% endif %}
    </script>
{% endblock %}
</body>
</html>
